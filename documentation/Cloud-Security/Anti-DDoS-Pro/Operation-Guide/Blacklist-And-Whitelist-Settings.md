# IP黑/白名单配置

白名单中的IP（段），访问时会被直接放行，不经过任何防护策略；
黑名单中的IP（段），访问时将会被直接阻断。

## 操作步骤
1. 登录 [DDoS IP高防 控制台](https://ip-anti-console.jdcloud.com/instancelist)。
2. 在 **实例列表** 页面，选择目标实例，点击 **实例名称** 或 **转发配置**，进入 **实例详情** 页面。
3. 在 **实例详情** 页面，点击 **IP黑/白名单库**，点击 **添加/编辑** ，即可配置IP黑/白名单规则。IP黑/白名单规则可应用到实例黑白名单配置或网站/非网站转发规则。
![](../../../../image/Advanced%20Anti-DDoS/ip-white-black-list-04.png)
4. 在规则中填写规则名称和规则覆盖的IP地址，支持输入IP或IP网段，仅支持/8，/16，/24，/32的掩码，换行添加多条，最大输入50条。</br>
![](../../../../image/Advanced%20Anti-DDoS/ip-white-black-list-05.png)
5. 实例黑白名单配置，对整个实例的规则生效。在 **实例详情** 页面，点击下拉展开 **黑白名单配置** 。</br>
![](../../../../image/Advanced%20Anti-DDoS/ip-white-black-list-06.png)
6. 点击 **编辑** ， 选择IP黑/白名单库中已创建的黑白名单，也可以选择区域封禁。</br>
![](../../../../image/Advanced%20Anti-DDoS/ip-white-black-list-07.png)
7. 非网站类转发规则引用IP黑/白名单规则，在 **实例详情** 页面，点击 **非网站类转发规则** ，再点击已添加转发规则的 **防护规则** ，进入 **非网站类防护规则** 配置页面，可在非网站类防护规则白名单和黑名单配置中引用IP黑/白名单规则。转发规则上引用的IP黑/白名单规则，仅在该规则上生效。详情参见非网站类防护规则[黑白名单设置](Net-Service-Protection-Setting/Whitelist-Rules-Setting.md)
![](../../../../image/Advanced%20Anti-DDoS/ip-white-black-list-03.png)
8. 网站类转发规则引用IP黑/白名单，详情参见网站类防护规则[黑白名单设置](Web-service-Protection-Settings/URL-Whitelist-Rules-Setting.md)

## 配置说明
1. IP黑/白名单规则支持配置10条； 
2. 每条IP黑/白名单规则各支持配置50条IP（段）；
3. 黑/白名单可支持IP或者IP/掩码的配置，支持/8，/16，/24，/32掩码的配置；
4. IP黑/白名单规则可被实例黑白名单配置，网站类和非网站类转发规则引用，IP黑白名单规则仅在被引用后才生效；
5. 被引用到非网站类规则的IP黑/白名单规则优先级高于引用到实例黑白名单配置的IP黑/白名单规则；
6. 对于网站类防护，先根据实例级别IP黑白名单规则进行防护，再根据网站类规则黑白名单配置防护；
7. 黑白名单不允许重复配置。即同一个IP（段），不能既是黑名单，又是白名单；
8. 如果黑白名单存在包含关系，则白名单优先级高于黑名单，示例如下：</BR>
黑名单为 100.10.10.1/24, 白名单为100.10.10.1，则实际上100.10.10.1作为白名单生效；



